(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"5YvF":function(t,n,r){"use strict";r.d(n,"a",(function(){return e})),r("XF9X");var e=function(){function t(t,n,r){this.service=t,this.route=n,this.router=r}return t.prototype.onDelete=function(){var t=this;this.service.remove().then((function(){t.router.navigate(["../../"],{relativeTo:t.route})}))},t.prototype.onCancel=function(){this.router.navigate(["../","view"],{relativeTo:this.route})},t}()},D6yi:function(t,n,r){"use strict";r.d(n,"a",(function(){return e}));var e=function(){return function(){this.name="",this.form="",this.parents=[]}}()},Et9f:function(t,n,r){"use strict";r.d(n,"a",(function(){return o}));var e=r("CcnG"),o=(r("XF9X"),r("D6yi"),function(){function t(t,n,r,o){this.service=t,this.route=n,this.router=r,this.config=o,this.triggerError=new e.n}return t.prototype.onSubmit=function(t){var n=this,r=this.service.resource;r.data=t.data,this.service.save(r).then((function(){n.router.navigate(["../","view"],{relativeTo:n.route})})).catch((function(t){return n.triggerError.emit(t)}))},t}())},Fysl:function(t,n,r){"use strict";r.d(n,"a",(function(){return e})),r("LWLj"),r("XF9X");var e=function(){function t(t,n,r,e){this.service=t,this.route=n,this.auth=r,this.changeDetectorRef=e,this.perms={delete:!1,edit:!1}}return t.prototype.ngOnInit=function(){var t=this;this.service.loadResource(this.route),this.service.formLoaded.then((function(n){t.auth.ready.then((function(){t.service.resourceLoaded.then((function(r){t.service.formFormio.userPermissions(t.auth.user,n,r).then((function(n){t.perms.delete=n.delete,t.perms.edit=n.edit,t.changeDetectorRef.detectChanges()}))}))}))}))},t}()},OLPT:function(t,n,r){"use strict";r.d(n,"a",(function(){return b}));var e=r("CcnG"),o=r("ZYCi"),i=r("Ip0R"),u=r("Yi/Q"),s=r("S8Yu"),c=r("r6Rv"),l=r("rJcy"),a=r("3CKi"),f=r("QMXP"),h=r("XF9X"),p=r("D6yi"),v=e.vb({encapsulation:0,styles:[".back-button[_ngcontent-%COMP%] { font-size: 0.8em; }"],data:{}});function d(t){return e.Wb(0,[(t()(),e.xb(0,0,null,null,4,"h3",[["style","margin-top:0;"]],null,null,null,null,null)),(t()(),e.xb(1,0,null,null,2,"a",[["class","back-button"],["routerLink","../"]],[[1,"target",0],[8,"href",4]],[[null,"click"]],(function(t,n,r){var o=!0;return"click"===n&&(o=!1!==e.Lb(t,2).onClick(r.button,r.ctrlKey,r.metaKey,r.shiftKey)&&o),o}),null,null)),e.wb(2,671744,null,0,o.n,[o.k,o.a,i.h],{routerLink:[0,"routerLink"]},null),(t()(),e.xb(3,0,null,null,0,"i",[["class","fa fa-chevron-left glyphicon glyphicon-chevron-left"]],null,null,null,null,null)),(t()(),e.Tb(4,null,[" | New "," "]))],(function(t,n){t(n,2,0,"../")}),(function(t,n){var r=n.component;t(n,1,0,e.Lb(n,2).target,e.Lb(n,2).href),t(n,4,0,r.service.form.title)}))}function m(t){return e.Wb(0,[(t()(),e.gb(16777216,null,null,1,null,d)),e.wb(1,16384,null,0,i.k,[e.P,e.M],{ngIf:[0,"ngIf"]},null),(t()(),e.xb(2,0,null,null,1,"formio",[],null,[[null,"submit"]],(function(t,n,r){var e=!0;return"submit"===n&&(e=!1!==t.component.onSubmit(r)&&e),e}),u.c,u.b)),e.wb(3,770048,null,0,s.a,[e.z,c.a,[2,l.a],[2,a.a]],{form:[0,"form"],submission:[1,"submission"],refresh:[2,"refresh"],error:[3,"error"],success:[4,"success"]},{submit:"submit"})],(function(t,n){var r=n.component;t(n,1,0,r.service.form),t(n,3,0,r.service.form,r.service.resource,r.service.refresh,r.onError,r.onSuccess)}),null)}function g(t){return e.Wb(0,[(t()(),e.xb(0,0,null,null,1,"ng-component",[],null,null,null,m,v)),e.wb(1,114688,null,0,f.a,[h.a,o.a,o.k,p.a],null,null)],(function(t,n){t(n,1,0)}),null)}var b=e.tb("ng-component",f.a,g,{},{},[])},QMXP:function(t,n,r){"use strict";r.d(n,"a",(function(){return o}));var e=r("CcnG"),o=(r("XF9X"),r("D6yi"),function(){function t(t,n,r,o){this.service=t,this.route=n,this.router=r,this.config=o,this.onError=new e.n,this.onSuccess=new e.n}return t.prototype.ngOnInit=function(){this.service.setContext(this.route)},t.prototype.onSubmit=function(t){var n=this;this.service.save(t).then((function(){n.router.navigate(["../",n.service.resource._id,"view"],{relativeTo:n.route})})).catch((function(t){return n.onError.emit(t)}))},t}())},UQit:function(t,n,r){"use strict";r.d(n,"a",(function(){return o})),r("XF9X"),r("D6yi");var e=r("LvDl"),o=function(){function t(t,n,r,e){this.service=t,this.route=n,this.router=r,this.config=e}return t.prototype.ngOnInit=function(){var t=this;this.gridQuery={},this.service.setContext(this.route),this.service.formLoaded.then((function(){t.service&&t.config.parents&&t.config.parents.length?t.service.loadParents().then((function(n){Object(e.each)(n,(function(n){n&&n.filter&&(t.gridQuery["data."+n.name+"._id"]=n.resource._id)})),t.gridSrc=t.service.formUrl,t.createText="New "+t.service.form.title})):t.service.formUrl&&(t.gridSrc=t.service.formUrl,t.createText="New "+t.service.form.title)}))},t.prototype.onSelect=function(t){this.router.navigate([t._id,"view"],{relativeTo:this.route})},t.prototype.onCreateItem=function(){this.router.navigate(["new"],{relativeTo:this.route})},t}()},WBsH:function(t,n,r){"use strict";r("YCyN");var e=r("xXMy");r.d(n,"d",(function(){return e.a}));var o=r("LItn");r.d(n,"c",(function(){return o.a}));var i=r("95tr");r.d(n,"b",(function(){return i.a})),r("vckZ"),r("1aN1"),r("dymo");var u=r("m8nl");r.d(n,"g",(function(){return u.a}));var s=r("+7FJ");r.d(n,"e",(function(){return s.a}));var c=r("ypRH");r.d(n,"f",(function(){return c.a}));var l=r("GDim");r.d(n,"a",(function(){return l.a}))},XF9X:function(t,n,r){"use strict";r.d(n,"a",(function(){return a}));var e=r("CcnG"),o=(r("D6yi"),r("Di7c"),r("KzPs")),i=(r("r6Rv"),r("rJcy"),r("CFBA")),u=r.n(i),s=r("uckp"),c=r("LvDl"),l=r.n(c),a=function(){function t(t,n,r,i){var s=this;this.appConfig=t,this.config=n,this.loader=r,this.resourcesService=i,this.initialized=!1,this.alerts=new o.a,this.refresh=new e.n,this.formLoaded=new u.a((function(t,n){s.formResolve=t,s.formReject=n})),this.init()}return t.prototype.initialize=function(){console.warn("FormioResourceService.initialize() has been deprecated.")},t.prototype.init=function(){if(!this.initialized)return this.initialized=!0,this.appConfig&&this.appConfig.appUrl?(s.Formio.setBaseUrl(this.appConfig.apiUrl),s.Formio.setProjectUrl(this.appConfig.appUrl),s.Formio.formOnly=this.appConfig.formOnly):console.error("You must provide an AppConfig within your application!"),this.formUrl=this.appConfig.appUrl+"/"+this.config.form,this.resource={data:{}},this.resourcesService&&(this.resources=this.resourcesService.resources,this.resources[this.config.name]=this),this.loadForm()},t.prototype.onError=function(t){throw this.alerts.setAlert({type:"danger",message:t.message||t}),this.resourcesService&&this.resourcesService.error.emit(t),t},t.prototype.onFormError=function(t){this.formReject(t),this.onError(t)},t.prototype.setContext=function(t){this.resourceId=t.snapshot.params.id,this.resource={data:{}},this.resourceUrl=this.appConfig.appUrl+"/"+this.config.form,this.resourceId&&(this.resourceUrl+="/submission/"+this.resourceId),this.formio=new s.Formio(this.resourceUrl),this.resourcesService&&(this.resources[this.config.name]=this),this.loadParents()},t.prototype.loadForm=function(){var t=this;return this.formFormio=new s.Formio(this.formUrl),this.loader.setLoading(!0),this.formLoading=this.formFormio.loadForm().then((function(n){return t.form=n,t.formResolve(n),t.loader.setLoading(!1),t.loadParents(),n}),(function(n){return t.onFormError(n)})).catch((function(n){return t.onFormError(n)})),this.formLoading},t.prototype.loadParents=function(){var t=this;return this.config.parents&&this.config.parents.length?this.resourcesService?this.formLoading.then((function(n){var r=[];return t.config.parents.forEach((function(e){var o=e.resource||e,i=e.field||e,u=!e.hasOwnProperty("filter")||e.filter;t.resources.hasOwnProperty(o)&&t.resources[o].resourceLoaded&&r.push(t.resources[o].resourceLoaded.then((function(r){var e="";return s.Utils.eachComponent(n.components,(function(n,o){if(n.key===i)return n.hidden=!0,n.clearOnHide=!1,l.a.set(t.resource.data,o,r),e=o,!0})),{name:e,filter:u,resource:r}})))})),u.a.all(r).then((function(r){return t.refresh.emit({form:n,submission:t.resource}),r}))})):(console.warn("You must provide the FormioResources within your application to use nested resources."),u.a.resolve([])):u.a.resolve([])},t.prototype.onSubmissionError=function(t){this.onError(t)},t.prototype.loadResource=function(t){var n=this;return this.setContext(t),this.loader.setLoading(!0),this.resourceLoading=this.resourceLoaded=this.formio.loadSubmission(null,{ignoreCache:!0}).then((function(t){return n.resource=t,n.loader.setLoading(!1),n.refresh.emit({property:"submission",value:n.resource}),t}),(function(t){return n.onSubmissionError(t)})).catch((function(t){return n.onSubmissionError(t)})),this.resourceLoading},t.prototype.save=function(t){var n=this;return(t._id?this.formio:this.formFormio).saveSubmission(t).then((function(t){return n.resource=t,t}),(function(t){return n.onError(t)})).catch((function(t){return n.onError(t)}))},t.prototype.remove=function(){var t=this;return this.formio.deleteSubmission().then((function(){t.resource=null}),(function(n){return t.onError(n)})).catch((function(n){return t.onError(n)}))},t}()},kVPD:function(t,n,r){"use strict";var e=r("D6yi");r.d(n,"b",(function(){return e.a})),r("Di7c");var o=r("XF9X");r.d(n,"e",(function(){return o.a}));var i=r("Fysl");r.d(n,"a",(function(){return i.a}));var u=r("wLq9");r.d(n,"f",(function(){return u.a}));var s=r("Et9f");r.d(n,"c",(function(){return s.a})),r("5YvF"),r("QMXP");var c=r("UQit");r.d(n,"d",(function(){return c.a})),r("uFmT"),r("pP+O")},"pP+O":function(t,n,r){"use strict";r.d(n,"a",(function(){return i})),r("ikog"),r("KzPs"),r("YCyN"),r("Fysl"),r("wLq9"),r("Et9f"),r("5YvF"),r("QMXP"),r("UQit");var e=r("uFmT"),o=r("f/UD"),i=function(){function t(){}return t.forChild=function(n){return Object(o.a)(t,n,e.a)},t.forRoot=function(n){return Object(o.a)(t,n,e.a)},t}()},rbuc:function(t,n,r){"use strict";r.d(n,"a",(function(){return a}));var e=r("CcnG"),o=r("5YvF"),i=r("XF9X"),u=r("ZYCi"),s=e.vb({encapsulation:2,styles:[],data:{}});function c(t){return e.Wb(0,[(t()(),e.xb(0,0,null,null,1,"h3",[],null,null,null,null,null)),(t()(),e.Tb(-1,null,["Are you sure you wish to delete this record?"])),(t()(),e.xb(2,0,null,null,4,"div",[["class","btn-toolbar"]],null,null,null,null,null)),(t()(),e.xb(3,0,null,null,1,"button",[["class","btn btn-danger"],["style","margin-right: 10px;"],["type","button"]],null,[[null,"click"]],(function(t,n,r){var e=!0;return"click"===n&&(e=!1!==t.component.onDelete()&&e),e}),null,null)),(t()(),e.Tb(-1,null,["Yes"])),(t()(),e.xb(5,0,null,null,1,"button",[["class","btn btn-danger"],["type","button"]],null,[[null,"click"]],(function(t,n,r){var e=!0;return"click"===n&&(e=!1!==t.component.onCancel()&&e),e}),null,null)),(t()(),e.Tb(-1,null,["No"]))],null,null)}function l(t){return e.Wb(0,[(t()(),e.xb(0,0,null,null,1,"ng-component",[],null,null,null,c,s)),e.wb(1,49152,null,0,o.a,[i.a,u.a,u.k],null,null)],null,null)}var a=e.tb("ng-component",o.a,l,{},{},[])},uFmT:function(t,n,r){"use strict";r.d(n,"a",(function(){return l}));var e=r("Fysl"),o=r("wLq9"),i=r("Et9f"),u=r("5YvF"),s=r("QMXP"),c=r("UQit");function l(t){return[{path:"",component:t&&t.index?t.index:c.a},{path:"new",component:t&&t.create?t.create:s.a},{path:":id",component:t&&t.resource?t.resource:e.a,children:[{path:"",redirectTo:"view",pathMatch:"full"},{path:"view",component:t&&t.view?t.view:o.a},{path:"edit",component:t&&t.edit?t.edit:i.a},{path:"delete",component:t&&t.delete?t.delete:u.a}]}]}},wLq9:function(t,n,r){"use strict";r.d(n,"a",(function(){return e})),r("XF9X"),r("D6yi");var e=function(){return function(t,n){this.service=t,this.config=n}}()}}]);